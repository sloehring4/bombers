---
phase: 04-teams-rosters-system
plan: 02
type: execute
wave: 2
depends_on: ["04-01"]
files_modified:
  - src/app/teams/[teamId]/page.tsx
  - src/components/teams/RosterTable.tsx
  - src/components/teams/CoachCard.tsx
autonomous: true

must_haves:
  truths:
    - "Roster page shows player names and jersey numbers for the team"
    - "Coach names, roles, and photos appear on the roster page"
    - "Team photo displays in secondary/smaller placement when available"
    - "Empty roster shows friendly 'coming soon' message instead of blank table"
    - "Page returns 404 for invalid team IDs"
    - "All team pages are pre-rendered at build time via generateStaticParams"
  artifacts:
    - path: "src/app/teams/[teamId]/page.tsx"
      provides: "Dynamic roster page with generateStaticParams and async params"
      contains: "generateStaticParams"
    - path: "src/components/teams/RosterTable.tsx"
      provides: "Responsive player roster — table on desktop, cards on mobile"
      contains: "hidden md:block"
    - path: "src/components/teams/CoachCard.tsx"
      provides: "Coach display with photo, name, and role"
      contains: "next/image"
  key_links:
    - from: "src/app/teams/[teamId]/page.tsx"
      to: "src/lib/data/teams.ts"
      via: "import teams for data lookup and generateStaticParams"
      pattern: "import.*teams.*from.*@/lib/data/teams"
    - from: "src/app/teams/[teamId]/page.tsx"
      to: "src/components/teams/RosterTable.tsx"
      via: "component import for player display"
      pattern: "import RosterTable"
    - from: "src/app/teams/[teamId]/page.tsx"
      to: "src/components/teams/CoachCard.tsx"
      via: "component import for coach display"
      pattern: "import CoachCard"
---

<objective>
Build individual team roster pages where parents can see the full player roster, coaching staff, and team photo for any team.

Purpose: Complete the teams feature by providing detailed roster information accessible from the overview page.
Output: Dynamic roster pages at /teams/[teamId] with responsive player tables, coach cards, and team photos.
</objective>

<execution_context>
@C:/Users/sloeh/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/sloeh/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-teams-rosters-system/04-RESEARCH.md
@.planning/phases/04-teams-rosters-system/04-01-SUMMARY.md
@src/lib/data/teams.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create RosterTable and CoachCard components</name>
  <files>src/components/teams/RosterTable.tsx, src/components/teams/CoachCard.tsx</files>
  <action>
**RosterTable.tsx** — Create `src/components/teams/RosterTable.tsx`:
- Accept `players: Player[]` prop (import Player type from `@/lib/data/teams`)
- Sort players by jersey number ascending before rendering
- **Desktop view** (hidden on mobile, shown md+): Traditional HTML table with:
  - Table header row: navy bg (bg-bombers-navy), white text, columns for "Jersey #" and "Player Name"
  - Table body: white bg, divide-y for row separation, hover:bg-gray-50 on rows
  - Jersey number displayed in a yellow circle badge (w-10 h-10, bg-bombers-yellow, rounded-full, centered text)
  - Wrap table in a rounded-lg border-2 border-gray-200 overflow-hidden container
- **Mobile view** (shown on mobile, hidden md+): Card layout with:
  - Each player as a card: white bg, p-4, rounded-lg, border-2 border-gray-200, flex row layout
  - Jersey number in larger yellow circle badge (w-14 h-14) on left
  - Player name to the right, font-semibold, bombers-navy color
  - Cards in a vertical stack (space-y-3)
- **Empty state**: If players array is empty, render a dashed-border box with centered message: "Roster coming soon — check back after tryouts!" (bg-gray-50, border-2 border-dashed border-gray-300, rounded-lg, p-12, text-center)
- Per user decision: name and jersey number ONLY (no position, no grade)

**CoachCard.tsx** — Create `src/components/teams/CoachCard.tsx`:
- Accept `coach: Coach` prop (import Coach type from `@/lib/data/teams`)
- Use `next/image` for coach photo with proper width/height (not fill mode — use explicit dimensions like width={200} height={200} for card layout)
- Photo section: relative container, rounded top corners, bg-gray-100 as fallback
- Info section below photo: coach name as h3 (text-xl font-bold bombers-navy), role as subtitle (text-sm text-gray-600)
- No contact info displayed (privacy-first decision from research). Instead, optionally include a small "Contact via team page" link pointing to /contact if desired, but NOT required.
- Card styling: white bg, rounded-lg, border-2 border-gray-200, overflow-hidden, hover:border-bombers-yellow, hover:shadow-lg transition
- Use `sizes` prop on Image for responsive optimization: `(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 33vw`
- Handle missing photo gracefully: if photoUrl doesn't resolve, the bg-gray-100 fallback provides visual placeholder
  </action>
  <verify>Run `npx tsc --noEmit` to confirm no type errors in both components.</verify>
  <done>RosterTable renders responsive player list (table desktop, cards mobile) with empty state. CoachCard renders coach photo, name, and role with proper image optimization.</done>
</task>

<task type="auto">
  <name>Task 2: Build dynamic roster page with generateStaticParams</name>
  <files>src/app/teams/[teamId]/page.tsx</files>
  <action>
Create `src/app/teams/[teamId]/page.tsx` as an async Server Component:

**Static generation:**
- Export `generateStaticParams` that maps all teams to `{ teamId: team.id }` params
- This pre-renders all team pages at build time

**Page component:**
- Mark as `async` function
- CRITICAL: Await params before accessing — `const { teamId } = await params` (Next.js 15+ requirement)
- Type params as `Promise<{ teamId: string }>`
- Look up team from `teams` array by ID
- Call `notFound()` (from next/navigation) if team not found — returns proper 404

**Page layout sections (top to bottom):**

1. **Back navigation**: Link back to /teams with left arrow (ArrowLeft from lucide-react) and "All Teams" text. Style as inline-flex items-center gap-2, text-bombers-navy, hover:text-bombers-yellow.

2. **Page header**: Team name as h1 (text-3xl md:text-4xl font-bold bombers-navy), season + "Roster" as subtitle (e.g., "Spring 2026 Roster"), age group badge (inline bg-bombers-yellow text-bombers-navy px-3 py-1 rounded-full text-sm font-semibold).

3. **Coaching Staff section**: h2 heading "Coaching Staff", responsive grid (1 col mobile, 2 cols sm, 3 cols lg) of CoachCard components.

4. **Players section**: h2 heading "Players" with player count in parentheses (e.g., "Players (12)"), RosterTable component with team.players.

5. **Team Photo section** (conditional — only render if team.teamPhotoUrl exists): h2 heading "Team Photo", use `next/image` with fill mode in a constrained container (max-w-2xl, aspect-video or h-64, rounded-lg, overflow-hidden). Per user decision: secondary/smaller placement, NOT hero-sized.

**Metadata:**
- Export `generateMetadata` async function (also must await params)
- Return `{ title: '${team.name} Roster | O\'Fallon Bombers', description: 'View the ${team.name} roster for ${team.season}. Player names, jersey numbers, and coaching staff.' }`
- Return generic title/description if team not found

**Spacing:** Use consistent vertical spacing: mb-8 for header, mb-12 for each section, py-8 md:py-12 for page padding. Use container mx-auto px-4 for width constraint.
  </action>
  <verify>Run `npx tsc --noEmit` for type checking. Run `npm run build` to confirm all team pages are statically generated (check build output for /teams/[teamId] routes). Visit several roster pages in dev to confirm: full roster displays correctly, empty roster shows "coming soon" message, missing team photo section is hidden, back link works, 404 works for invalid IDs.</verify>
  <done>All team roster pages render at /teams/[teamId] with coaches, players (or empty state), optional team photo, and back navigation. Pages are pre-rendered at build time. Invalid team IDs return 404.</done>
</task>

</tasks>

<verification>
- `npx tsc --noEmit` passes with no errors
- `npm run build` succeeds and generates all /teams/[teamId] pages (check build output lists each team slug)
- Roster page displays coaches in a grid with photos
- Roster page displays players in table (desktop) or cards (mobile)
- Empty roster team shows "Roster coming soon" message
- Team photo appears in secondary placement when available
- Team photo section is absent when teamPhotoUrl is undefined
- Back link navigates to /teams overview
- Invalid team ID (e.g., /teams/nonexistent) returns 404
- Full flow works: /teams overview -> click team card -> roster page loads with correct data
</verification>

<success_criteria>
Parents can navigate from the teams overview to any individual team's roster page, see the coaching staff with photos, view the full player roster with jersey numbers, and see the team photo. The complete teams flow (overview -> roster) is functional end-to-end.
</success_criteria>

<output>
After completion, create `.planning/phases/04-teams-rosters-system/04-02-SUMMARY.md`
</output>
