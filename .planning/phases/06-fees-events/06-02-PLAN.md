---
phase: 06-fees-events
plan: 02
type: execute
wave: 2
depends_on: ["06-01"]
files_modified:
  - src/app/fees/page.tsx
autonomous: true

must_haves:
  truths:
    - "Fees page renders at /fees route with all four sections visible"
    - "Season fee breakdown displays pricing cards for each age group"
    - "Key dates section shows chronological list of tryouts, season, and tournament dates"
    - "Registration section includes embedded JerseyWatch iframe with fallback"
    - "FAQ section uses the existing Accordion component with expand/collapse behavior"
    - "FAQ items are grouped by topic category with category headings"
  artifacts:
    - path: "src/app/fees/page.tsx"
      provides: "Complete Fees & Events page"
      contains: "FeesPage"
  key_links:
    - from: "src/app/fees/page.tsx"
      to: "src/lib/data/fees.ts"
      via: "data imports"
      pattern: "import.*from.*data/fees"
    - from: "src/app/fees/page.tsx"
      to: "src/components/fees/FeeCard.tsx"
      via: "component import"
      pattern: "import.*FeeCard"
    - from: "src/app/fees/page.tsx"
      to: "src/components/fees/EventList.tsx"
      via: "component import"
      pattern: "import.*EventList"
    - from: "src/app/fees/page.tsx"
      to: "src/components/fees/RegistrationCTA.tsx"
      via: "component import"
      pattern: "import.*RegistrationCTA"
    - from: "src/app/fees/page.tsx"
      to: "src/components/organization/Accordion.tsx"
      via: "Accordion import for FAQ"
      pattern: "import.*Accordion.*from.*organization/Accordion"
---

<objective>
Compose the Fees & Events page at /fees, assembling data and components from Plan 01 with the existing Accordion component into a complete page with four sections: fees, dates, registration, and FAQ.

Purpose: Give parents a single page to find season costs, key dates, registration, and answers to common questions.
Output: Fully functional /fees page ready for production.
</objective>

<execution_context>
@C:/Users/sloeh/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/sloeh/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-fees-events/06-RESEARCH.md
@.planning/phases/06-fees-events/06-01-SUMMARY.md

# Source files needed for assembly
@src/lib/data/fees.ts
@src/components/fees/FeeCard.tsx
@src/components/fees/EventList.tsx
@src/components/fees/RegistrationCTA.tsx
@src/components/organization/Accordion.tsx
@src/app/about/page.tsx (page layout pattern reference)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Compose Fees & Events page with all four sections</name>
  <files>src/app/fees/page.tsx</files>
  <action>
Create `src/app/fees/page.tsx` as the main Fees & Events page. This is a page component that composes Plan 01 components plus the existing Accordion.

**IMPORTANT:** The page component itself must NOT have 'use client'. The Accordion import is a client component but can be used from a server component parent. However, since the FAQ section needs to map FAQItem data to AccordionItem objects with JSX content (React.ReactNode), and this mapping happens at render time, the page needs 'use client' to properly handle the JSX in AccordionItem content. Add 'use client' directive.

**Page structure (follow about/page.tsx layout pattern):**

```
<main className="container mx-auto px-4 max-w-5xl py-8 md:py-12">
  {/* Page Header */}
  {/* Season Fees Section */}
  {/* Key Dates Section */}
  {/* Registration Section */}
  {/* FAQ Section */}
</main>
```

**Section 1 — Page Header:**
- h1: "Fees & Events" (text-3xl md:text-4xl font-bold text-bombers-navy mb-4)
- Subtitle paragraph: "Everything you need to know about season costs, key dates, and how to register your player." (text-lg text-gray-600 mb-12)

**Section 2 — Season Fees (FEES-01):**
- Section heading: "Season Fees" with yellow bottom border accent (text-2xl font-semibold text-bombers-navy mb-6 border-b-4 border-bombers-yellow pb-2 inline-block)
- Brief intro: "Fees vary by age group and cover the full season including tournaments, uniforms, and facilities."
- Payment note paragraph: "Payment plans are available. Contact us if you need financial assistance — we never want cost to prevent a player from participating." Link "Contact us" to /contact.
- Responsive grid of FeeCard components: grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6
- Import ageFees from fees.ts and map to FeeCard components
- mb-16 on section

**Section 3 — Key Dates (FEES-02):**
- Section heading: "Key Dates" with same yellow accent style
- Brief intro: "Mark your calendar for these important dates for the upcoming season."
- Import keyDates from fees.ts and pass to EventList component
- mb-16 on section

**Section 4 — Registration (FEES-03):**
- Section heading: "Registration" with same yellow accent style
- Import and render RegistrationCTA component
- mb-16 on section

**Section 5 — FAQ (FEES-04, LOCKED: must use Accordion):**
- Section heading: "Frequently Asked Questions" with same yellow accent style
- Import faqItems from fees.ts and Accordion + AccordionItem from @/components/organization/Accordion
- Group FAQ items by category. For each category group, render:
  - Category heading: h3 with capitalized category name (text-lg font-semibold text-bombers-navy mb-3 mt-8, first group mt-0)
  - Map FAQItem[] to AccordionItem[]: id stays same, title = question, content = `<p className="text-gray-700 leading-relaxed">{answer}</p>`
  - Render one Accordion per category group
- Category display order: fees, tryouts, season, general
- Category display names: "Fees & Payments", "Tryouts", "Season & Schedule", "General"

**Export metadata for SEO:**
```typescript
export const metadata = {
  title: "Fees & Events | O'Fallon Bombers Baseball",
  description: "Season fees by age group, key dates, registration information, and FAQ for O'Fallon Bombers youth baseball.",
};
```

Note: If using 'use client', metadata export won't work from this file. In that case, create a separate `src/app/fees/layout.tsx` that exports the metadata, OR restructure the page to keep it as a server component by extracting the FAQ section into a separate client component `src/components/fees/FAQSection.tsx` that handles the AccordionItem mapping. The latter approach (extracting FAQSection) is preferred because it keeps the page as a server component and allows metadata export.

**Preferred approach — Extract FAQSection client component:**
1. Create `src/components/fees/FAQSection.tsx` with 'use client':
   - Imports Accordion from @/components/organization/Accordion
   - Accepts faqItems as prop
   - Groups by category, maps to AccordionItem with JSX content
   - Renders category headings + Accordion per group
2. Keep `src/app/fees/page.tsx` as server component (no 'use client')
3. Export metadata from page.tsx
4. Import FAQSection into page and pass faqItems data
  </action>
  <verify>
1. `npx tsc --noEmit` passes
2. Dev server shows /fees page with all four sections: fee cards grid, key dates list, registration iframe, FAQ accordions
3. FAQ accordions expand/collapse on click
4. Page has proper metadata export
  </verify>
  <done>
/fees page renders all four sections: fee pricing cards in responsive grid, chronological key dates with icons, JerseyWatch registration embed with fallback link, and grouped FAQ accordions using the existing Accordion component. Page exports SEO metadata.
  </done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` passes with no errors
2. `/fees` route loads and displays page header, fees grid, key dates, registration section, and FAQ
3. Fee cards show all 9 age groups with totals and breakdowns
4. Key dates show 6-8 dates with calendar icons
5. Registration section has iframe with sandbox attribute and visible fallback link
6. FAQ section uses Accordion component (expand/collapse works)
7. FAQ items are grouped by category with headings
8. Navigation link to /fees already exists in navigation.ts (confirmed during planning)
</verification>

<success_criteria>
- Parents visiting /fees see season fee breakdown for each age group (FEES-01)
- Key dates for tryouts, season start, and tournaments are clearly listed (FEES-02)
- Registration section embeds JerseyWatch form with link fallback (FEES-03)
- FAQ section answers common parent questions in accordion format grouped by topic (FEES-04)
- Page follows existing layout patterns from about/page.tsx
</success_criteria>

<output>
After completion, create `.planning/phases/06-fees-events/06-02-SUMMARY.md`
</output>
