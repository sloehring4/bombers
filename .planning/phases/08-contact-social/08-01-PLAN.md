---
phase: 08-contact-social
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - src/lib/data/contact.ts
  - src/lib/schemas/contact.ts
  - src/components/contact/ContactForm.tsx
  - src/components/contact/SocialLinks.tsx
  - .env.local
  - .env.example
autonomous: true
user_setup:
  - service: Web3Forms
    why: "Email delivery for contact form submissions"
    env_vars:
      - name: NEXT_PUBLIC_WEB3FORMS_ACCESS_KEY
        source: "Sign up at https://web3forms.com -> Create form -> Copy access key"
    dashboard_config: []

must_haves:
  truths:
    - "Contact form validates name, email, subject, and message fields with inline errors"
    - "Contact form submits to Web3Forms API and shows success/error feedback"
    - "Social links component renders Facebook and Instagram with icons and proper accessibility"
    - "Contact data is centralized in a type-safe data file"
  artifacts:
    - path: "src/lib/data/contact.ts"
      provides: "Social links, donation URL, contact email constants"
      contains: "socialLinks"
    - path: "src/lib/schemas/contact.ts"
      provides: "Zod validation schema for contact form"
      contains: "contactFormSchema"
    - path: "src/components/contact/ContactForm.tsx"
      provides: "Client-side contact form with validation and Web3Forms submission"
      contains: "use client"
    - path: "src/components/contact/SocialLinks.tsx"
      provides: "Social media icon links component"
      contains: "socialLinks"
  key_links:
    - from: "src/components/contact/ContactForm.tsx"
      to: "src/lib/schemas/contact.ts"
      via: "zodResolver import"
      pattern: "zodResolver.*contactFormSchema"
    - from: "src/components/contact/ContactForm.tsx"
      to: "https://api.web3forms.com/submit"
      via: "fetch POST"
      pattern: "fetch.*web3forms"
    - from: "src/components/contact/SocialLinks.tsx"
      to: "src/lib/data/contact.ts"
      via: "socialLinks import"
      pattern: "import.*socialLinks.*contact"
---

<objective>
Install form dependencies, create contact data layer and validation schema, and build ContactForm and SocialLinks components.

Purpose: Establishes the foundation components and data for the contact page â€” form validation, email submission, and social media links.
Output: Working ContactForm with Web3Forms integration, SocialLinks component with icons, centralized contact data file, Zod schema.
</objective>

<execution_context>
@C:/Users/sloeh/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/sloeh/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/08-contact-social/08-RESEARCH.md
@src/lib/data/spirit-wear.ts (reference for data file pattern)
@src/components/fees/FAQSection.tsx (reference for client component pattern)
@src/components/layout/Footer.tsx (has existing social URLs to match)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install dependencies and create data layer with Zod schema</name>
  <files>
    package.json
    src/lib/data/contact.ts
    src/lib/schemas/contact.ts
    .env.local
    .env.example
  </files>
  <action>
    1. Install react-hook-form, zod, and @hookform/resolvers:
       `npm install react-hook-form zod @hookform/resolvers`

    2. Create `src/lib/schemas/contact.ts` with Zod schema:
       - `contactFormSchema` with fields:
         - name: string, min 1 ("Name is required"), max 100
         - email: string, email("Invalid email address")
         - phone: string, optional (flexible format regex allowing digits, spaces, dashes, parens)
         - subject: string, min 1 ("Subject is required"), max 200
         - message: string, min 10 ("Message must be at least 10 characters"), max 2000
       - Export `ContactFormData` type via `z.infer<typeof contactFormSchema>`

    3. Create `src/lib/data/contact.ts` following existing data file pattern (like spirit-wear.ts):
       - Import Facebook and Instagram from lucide-react
       - Import LucideIcon type from lucide-react
       - Define and export `SocialLink` interface: { name: string; url: string; icon: LucideIcon }
       - Export `socialLinks` readonly array with:
         - Facebook: https://facebook.com/ofallonbombers (matches Footer.tsx)
         - Instagram: https://instagram.com/ofallonbombers (matches Footer.tsx)
       - Export `CONTACT_EMAIL = 'ofallonbombers@gmail.com'`
       - Export `DONATION_URL = 'https://paypal.me/ofallonbombers'` (placeholder, easy to update)

    4. Create `.env.example` with:
       `NEXT_PUBLIC_WEB3FORMS_ACCESS_KEY=your-access-key-here`

    5. Create `.env.local` with the same placeholder value (user will replace with real key).
       Ensure `.env.local` is in `.gitignore` (Next.js default).
  </action>
  <verify>
    - `npm ls react-hook-form zod @hookform/resolvers` shows all three installed
    - TypeScript compiles: `npx tsc --noEmit src/lib/schemas/contact.ts src/lib/data/contact.ts` passes
  </verify>
  <done>
    - react-hook-form, zod, @hookform/resolvers in package.json dependencies
    - contactFormSchema validates name, email, phone (optional), subject, message with proper error messages
    - ContactFormData type exported
    - contact.ts exports socialLinks array, CONTACT_EMAIL, DONATION_URL
    - .env.example documents required environment variable
  </done>
</task>

<task type="auto">
  <name>Task 2: Build ContactForm and SocialLinks components</name>
  <files>
    src/components/contact/ContactForm.tsx
    src/components/contact/SocialLinks.tsx
  </files>
  <action>
    1. Create `src/components/contact/ContactForm.tsx` as a 'use client' component:
       - Import useForm from react-hook-form, zodResolver from @hookform/resolvers/zod
       - Import contactFormSchema and ContactFormData from @/lib/schemas/contact
       - Import useState from react
       - Use useForm with zodResolver(contactFormSchema)
       - Track isSubmitting (boolean) and submitStatus ('idle' | 'success' | 'error') state
       - Form fields: name (text, required), email (email, required), phone (tel, optional), subject (text, required), message (textarea, required)
       - Each field follows accessible pattern:
         - label with htmlFor, required indicator (red asterisk)
         - input with {...register('fieldName')}
         - aria-invalid={errors.field ? 'true' : 'false'}
         - aria-describedby={errors.field ? 'field-error' : undefined}
         - Error message with id="field-error", role="alert"
       - Input styling: w-full px-4 py-3 rounded-lg border-2 transition-colors
         - Normal: border-gray-300 focus:border-bombers-yellow focus:ring-2 focus:ring-bombers-yellow/20
         - Error: border-red-500 focus:border-red-600 focus:ring-2 focus:ring-red-200
       - Textarea rows={5} for message
       - onSubmit handler:
         - Sets isSubmitting true, submitStatus idle
         - POSTs to 'https://api.web3forms.com/submit' with JSON body:
           access_key: process.env.NEXT_PUBLIC_WEB3FORMS_ACCESS_KEY
           from_name: data.name
           subject: `Bombers Website: ${data.subject}`
           plus all form data fields
         - On success (response.ok): set submitStatus 'success', call reset()
         - On failure: set submitStatus 'error'
         - try/catch for network errors
         - finally: set isSubmitting false
       - Submit button: w-full bg-bombers-yellow text-bombers-navy py-3 px-6 rounded-lg font-semibold
         - Disabled when isSubmitting, shows "Sending..." text
       - Success message: green background, border-l-4 border-green-500, role="status"
       - Error message: red background, border-l-4 border-red-500, role="alert"
         - Include fallback text: "email us directly at ofallonbombers@gmail.com"

    2. Create `src/components/contact/SocialLinks.tsx` as a server component (no 'use client'):
       - Import socialLinks from @/lib/data/contact
       - Render a flex container with gap-4
       - Map over socialLinks, render each as:
         - anchor tag with href, target="_blank", rel="noopener noreferrer"
         - aria-label={`Visit our ${social.name} page`}
         - Styling: flex items-center gap-3 p-4 rounded-lg border-2 border-gray-200 hover:border-bombers-yellow transition-colors
         - Icon rendered as <social.icon className="w-6 h-6" aria-hidden="true" />
         - Text span with font-semibold
       - Layout: flex flex-col sm:flex-row for responsive stacking
  </action>
  <verify>
    - `npx tsc --noEmit` passes with no errors
    - `npm run build` compiles successfully
  </verify>
  <done>
    - ContactForm renders 5 form fields with inline validation errors and accessible ARIA attributes
    - ContactForm submits to Web3Forms API with loading state and success/error feedback
    - SocialLinks renders Facebook and Instagram links with lucide-react icons
    - Both components use project styling conventions (bombers-yellow, bombers-navy, rounded-lg, transition-colors)
  </done>
</task>

</tasks>

<verification>
- `npm run build` completes without errors
- ContactForm component has 'use client' directive
- All form fields have aria-invalid and aria-describedby attributes
- Error messages use role="alert"
- SocialLinks imports from centralized data file (not hardcoded URLs)
- Zod schema validates all required fields with meaningful error messages
</verification>

<success_criteria>
- react-hook-form, zod, @hookform/resolvers installed and importable
- Contact data centralized in src/lib/data/contact.ts
- Zod schema in src/lib/schemas/contact.ts with type export
- ContactForm component with full validation, Web3Forms submission, accessible error handling
- SocialLinks component with Facebook/Instagram icon links
- Build passes cleanly
</success_criteria>

<output>
After completion, create `.planning/phases/08-contact-social/08-01-SUMMARY.md`
</output>
