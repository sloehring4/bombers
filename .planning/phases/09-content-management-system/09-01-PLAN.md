---
phase: 09-content-management-system
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/lib/data/teams.json
  - src/lib/data/fees.json
  - src/lib/data/organization.json
  - src/lib/data/sponsors.json
  - src/lib/data/home.json
  - src/lib/data/spirit-wear.json
  - src/lib/data/contact.json
  - src/lib/data/conduct.json
  - src/lib/schemas/teams.ts
  - src/lib/schemas/fees.ts
  - src/lib/schemas/organization.ts
  - src/lib/schemas/sponsors.ts
  - src/lib/schemas/home.ts
  - src/lib/schemas/spirit-wear.ts
  - src/lib/schemas/contact.ts
  - src/lib/schemas/conduct.ts
  - src/lib/schemas/index.ts
  - src/lib/data/teams.ts
  - src/lib/data/fees.ts
  - src/lib/data/organization.ts
  - src/lib/data/sponsors.ts
  - src/lib/data/home.ts
  - src/lib/data/spirit-wear.ts
  - src/lib/data/contact.ts
  - src/lib/data/conduct.ts
autonomous: true

must_haves:
  truths:
    - "All content data is stored in JSON files that non-technical users can edit"
    - "Zod schemas validate all JSON data at import time with descriptive error messages"
    - "TypeScript types are inferred from Zod schemas (single source of truth)"
    - "All existing pages render identically after migration (no regressions)"
    - "Files with Lucide icons (home, contact) use JSON for data with TS icon mapping"
  artifacts:
    - path: "src/lib/data/teams.json"
      provides: "Team rosters, coaches, players in editable JSON"
    - path: "src/lib/data/fees.json"
      provides: "Age fees, key dates, FAQ items in editable JSON"
    - path: "src/lib/data/organization.json"
      provides: "Board members and staff in editable JSON"
    - path: "src/lib/data/sponsors.json"
      provides: "Sponsor listings in editable JSON"
    - path: "src/lib/data/home.json"
      provides: "Hero content, quick links text, key dates in editable JSON"
    - path: "src/lib/data/spirit-wear.json"
      provides: "Spirit wear products and store URL in editable JSON"
    - path: "src/lib/data/contact.json"
      provides: "Contact email, donation URL, social links in editable JSON"
    - path: "src/lib/data/conduct.json"
      provides: "Code of conduct sections in editable JSON"
    - path: "src/lib/schemas/teams.ts"
      provides: "Zod schema for teams with jersey number uniqueness, age group validation"
      exports: ["TeamsDataSchema", "TeamSchema", "PlayerSchema", "CoachSchema"]
    - path: "src/lib/schemas/index.ts"
      provides: "Central export of all schemas"
  key_links:
    - from: "src/lib/data/teams.ts"
      to: "src/lib/data/teams.json"
      via: "JSON import + Zod parse"
      pattern: "import.*teams\\.json.*Schema\\.parse"
    - from: "src/app/teams/page.tsx"
      to: "src/lib/data/teams.ts"
      via: "Same import path as before"
      pattern: "from '@/lib/data/teams'"
---

<objective>
Migrate all 8 TypeScript data files to JSON + Zod schemas, keeping existing import paths working.

Purpose: Enable non-technical board members to edit plain JSON files instead of TypeScript syntax. JSON is simpler (no export keywords, no type annotations, no `as const`), reducing the chance of syntax errors from inexperienced editors.

Output: 8 JSON data files, 8 Zod schema files, updated TS wrapper files that import JSON and validate via Zod, all existing component imports unchanged.
</objective>

<execution_context>
@C:/Users/sloeh/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/sloeh/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/09-content-management-system/09-RESEARCH.md
@src/lib/data/teams.ts
@src/lib/data/fees.ts
@src/lib/data/organization.ts
@src/lib/data/sponsors.ts
@src/lib/data/home.ts
@src/lib/data/spirit-wear.ts
@src/lib/data/contact.ts
@src/lib/data/conduct.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Zod schemas for all 8 data types</name>
  <files>
    src/lib/schemas/teams.ts
    src/lib/schemas/fees.ts
    src/lib/schemas/organization.ts
    src/lib/schemas/sponsors.ts
    src/lib/schemas/home.ts
    src/lib/schemas/spirit-wear.ts
    src/lib/schemas/contact.ts
    src/lib/schemas/conduct.ts
    src/lib/schemas/index.ts
  </files>
  <action>
    Create `src/lib/schemas/` directory with Zod validation schemas for each data type. Use Zod 4 syntax (already installed at 4.3.6). Each schema must:

    1. **teams.ts**: PlayerSchema (name: min 1, jerseyNumber: int 0-99), CoachSchema (name, role enum ['Head Coach', 'Assistant Coach'], photoUrl string, bio optional), TeamSchema (id kebab-case regex, name, ageGroup regex /^(7|8|9|10|11|12|13|14|15)U$/, headCoachName, season, players array, coaches array min 1, teamPhotoUrl optional). Add `.refine()` for duplicate jersey number check within each team and duplicate team ID check at root. TeamsDataSchema wraps with currentSeason (format "Season YYYY").

    2. **fees.ts**: AgeFeeSchema (ageGroup, breakdown array of {label, amount: positive number}, total: positive number, description optional). KeyDateSchema (id, label, date string, category enum ['tryout','registration','season','tournament'], description optional). FAQItemSchema (id, question, answer, category enum ['fees','tryouts','season','general']). FeesDataSchema wraps all three arrays.

    3. **organization.ts**: BoardMemberSchema (name, title, photoUrl, bio optional). OrganizationDataSchema with boardMembers and staff arrays.

    4. **sponsors.ts**: SponsorSchema (id kebab-case, name, logoUrl, description, websiteUrl optional URL). SponsorsDataSchema wraps array.

    5. **home.ts**: QuickLinkSchema (iconName: string for icon key mapping, title, description, href). KeyDateSchema (label, date). HeroContentSchema (headline, tagline, primaryCta {text, href}, secondaryCta {text, href}). HomeDataSchema wraps all.

    6. **spirit-wear.ts**: SpiritWearProductSchema (id, name, description, price positive, imageUrl, category enum ['apparel','accessories','headwear'], sizes optional string array, externalUrl optional). SpiritWearDataSchema with storeUrl and products array.

    7. **contact.ts**: SocialLinkSchema (name, url, iconName: string for icon key mapping). ContactDataSchema with socialLinks array, contactEmail, donationUrl.

    8. **conduct.ts**: ConductSectionSchema (id, title, rules string array min 1). ConductDataSchema wraps array.

    All schemas export inferred TypeScript types via `z.infer<typeof Schema>`.

    **index.ts**: Re-export all schemas and types from all 8 files.

    Use descriptive error messages in every validator (e.g., "Jersey number must be between 0 and 99", not just "Invalid").
  </action>
  <verify>
    TypeScript compilation succeeds: run `npx tsc --noEmit` (should pass since schemas are standalone with no JSON imports yet).
  </verify>
  <done>All 9 schema files exist in src/lib/schemas/, each exports Zod schemas and inferred TypeScript types, all with descriptive validation error messages.</done>
</task>

<task type="auto">
  <name>Task 2: Migrate data to JSON and update TS wrappers</name>
  <files>
    src/lib/data/teams.json
    src/lib/data/fees.json
    src/lib/data/organization.json
    src/lib/data/sponsors.json
    src/lib/data/home.json
    src/lib/data/spirit-wear.json
    src/lib/data/contact.json
    src/lib/data/conduct.json
    src/lib/data/teams.ts
    src/lib/data/fees.ts
    src/lib/data/organization.ts
    src/lib/data/sponsors.ts
    src/lib/data/home.ts
    src/lib/data/spirit-wear.ts
    src/lib/data/contact.ts
    src/lib/data/conduct.ts
  </files>
  <action>
    For each of the 8 data files, create a JSON file and rewrite the TS file as a thin wrapper:

    **Standard files (teams, fees, organization, sponsors, spirit-wear, conduct):**
    1. Extract all data values from the .ts file into a new .json file. Remove TypeScript syntax (`export`, `as const`, type annotations, interface definitions). Wrap in a root object matching the schema (e.g., `{"currentSeason": "...", "teams": [...]}`).
    2. Rewrite the .ts file to: import the JSON, import the schema, parse with Zod, re-export the same named exports as before so all downstream imports remain unchanged. Export types from the schema (not local interfaces).

    Example pattern for teams.ts:
    ```typescript
    import teamsJson from './teams.json';
    import { TeamsDataSchema } from '../schemas/teams';
    export type { Player, Coach, Team } from '../schemas/teams';

    const validated = TeamsDataSchema.parse(teamsJson);
    export const currentSeason = validated.currentSeason;
    export const teams = validated.teams;
    ```

    **Icon-containing files (home.ts, contact.ts):**
    These files reference Lucide React icons (Users, DollarSign, Shirt, Mail, Facebook, Instagram). Icons cannot be stored in JSON.

    For **home.json**: Store `iconName` as a string key (e.g., "Users", "DollarSign", "Shirt", "Mail") instead of the actual icon component. Store quickLinks, keyDates, and heroContent.

    For **home.ts**: Import JSON + schema, then map `iconName` strings to actual Lucide icon components using a lookup object. Re-export `QuickLink` interface (which includes the `LucideIcon` type for the `icon` property) from the TS file directly (not from schema, since the schema uses string for iconName). Export mapped data with real icon references.

    For **contact.json**: Store `iconName` as string ("Facebook", "Instagram"). Store socialLinks, contactEmail, donationUrl.

    For **contact.ts**: Import JSON + schema, map iconName to Lucide icons. Re-export `SocialLink` interface with `LucideIcon` type from the TS file. Export mapped data with real icon references.

    **Critical: Maintain exact same export names and types** so these files are drop-in replacements. Every component that currently imports from `@/lib/data/teams` (etc.) must continue working without changes.

    The `tsconfig.json` already has `"resolveJsonModule": true` so JSON imports work.

    **JSON formatting:** Use 2-space indentation for readability by non-technical editors.
  </action>
  <verify>
    1. Run `npx tsc --noEmit` to confirm no type errors.
    2. Run `npx next build` to confirm the site builds successfully with all pages rendering.
  </verify>
  <done>All 8 data files have been split into JSON (data) + TS (validation wrapper). All existing page imports work without changes. The site builds and renders identically to before migration.</done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` passes with zero errors
2. `npx next build` completes successfully
3. All 8 JSON files exist in src/lib/data/ with valid JSON content
4. All 8 schema files exist in src/lib/schemas/ with Zod validation
5. No component files were modified (only data layer changed)
</verification>

<success_criteria>
- All content data lives in editable JSON files
- Zod schemas validate data at import time with descriptive errors
- TypeScript types are inferred from schemas (single source of truth)
- Site builds and all pages render correctly (zero regressions)
- Existing component imports unchanged
</success_criteria>

<output>
After completion, create `.planning/phases/09-content-management-system/09-01-SUMMARY.md`
</output>
